# ================================
# Goma Gateway Main Configuration
# ================================
gateway:
  timeouts:
    write: 60
    read: 60
    idle: 60
  entryPoints:
    web:
      address: "[::]:80"
    webSecure:
      address: "[::]:443"

  # TLS configuration using custom certificates
  # (Alternatively, use Let's Encrypt via certManager below)
  tls:
    keys: []
     # - cert: /etc/goma/certs/cert.pem
     #   key: /etc/goma/certs/key.pem

  # Redis integration (optional)
  redis:
    addr: "${REDIS_ADDR}"       # Redis server address
    password: ${REDIS_PASSWORD} # Redis password (optional)
    db: 0                       # Redis database number (optional)
    flushOnStartup: false       # Flush Redis on startup (optional)
  # Monitoring & metrics
  monitoring:
    host: metrics.example.com   # Metrics hostname (must match a defined route host)
    enableMetrics: true
    metricsPath: /metrics       # Custom metrics endpoint path
    enableReadiness: false      # Readiness probe endpoint
    enableLiveness: true        # Liveness probe endpoint
    middleware:
      metrics:
        - metrics-auth          # Middleware(s) applied to metrics endpoint

  # Logging configuration
  log:
    level: info                 # Log level: debug, info, warn, error, off

  # Load extra configuration files
  extraConfig:
    directory: /etc/goma/extra
    watch: true                 # Auto-reload on file changes (ideal for GitOps)

# Certificate Manager
certManager:
  acme:
    ## Enable Let's Encrypt by providing your email (required for ACME)
    # email: admin@example.com   # Contact email for certificate registration
    storageFile: /etc/letsencrypt/acme.json # Stores certs & keys, secure with proper permissions
